(async()=>{const n=window.location.pathname;if(!["/login.html","/register.html","/"].includes(n))try{(await fetch("/api/auth/check",{credentials:"include"})).ok||(window.location.href="/login.html")}catch(t){console.error("ログイン確認失敗:",t),window.location.href="/login.html"}})();
